<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: scripts.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: scripts.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { moveWallToLeft } from "./canvas-movement.js";
import {Bar} from "./bar.js";
import {Ball} from './ball.js';

//TODO apunta lo del window. para hacer la variable global 
//   https://stackoverflow.com/questions/43605434/what-is-the-correct-way-to-define-global-variable-in-es6-modules-->

/**
 * myBar is declared as global with the window keyword, because we need it
 * this way. SEE NOTES FOR DEVELOPERS NUMBER 2 FOR DETAILS
 * 
 * 
 */

window.myBar=new Bar(25,25,25,175);

const ballSize=10;

/*
    ballSize (size is radius), must be added to make ball collapse with bar border
*/
initialPositionForBallX=myBar.x+myBar.width+ballSize;
initialPositionForBallY=myBar.y+(myBar.height/2);


let myBall=new Ball(initialPositionForBallX,initialPositionForBallY,0,0,'black',ballSize);


//TODO change ball speed at certain time
//TODO make bar smaller at time wall moves to the left
//TODO always ball must start slow
//moveWallToLeft();


/*

    with setInterval, I can do that bar and ball don´t delet if mouse event is not
    fired, that means for example if mouse is not inside the canvas

    timer is set to 0 so it is drawn "instantly"
*/

setInterval(()=>{

    myBar.draw();
    myBall.draw();
    



},0);

/*
    we draw again bar and ball when mouse event,
  
*/
myCanvas.addEventListener("mousemove",(event)=>{

    
    myBar.deleteOldRectangle();
    myBar.y=event.pageY;//new rectangle will start where pageY
    myBar.draw();

    //myBall.draw();

    /*
        if ball is glued to the bar, must follow it,
        so will be redraw with relative values to the bar, like at the beginning
        but with new values
    */

        if(myBall.isBallGluedAtBar){
           
            initialPositionForBallX=myBar.x+myBar.width+ballSize;
            initialPositionForBallY=myBar.y+(myBar.height/2);

           /* console.log( initialPositionForBallX);
            console.log(initialPositionForBallY);*/

            //delete old position, code for it is inside update method
            myBall.update();

            //set new initial positions fot the ball, relative to the bar

            myBall.x=initialPositionForBallX;
            myBall.y=initialPositionForBallY;

           // myBall=new Ball(initialPositionForBallX,initialPositionForBallY,0,0,randomColor(),ballSize);

            myBall.draw();

        }
  
});

myCanvas.addEventListener("click",(event)=>{
    

    if(myBall.isBallGluedAtBar){
        myBall.isBallGluedAtBar=false;

        /*myBall.velX=3;
        myBall.velY=3;
        myBall.update();

        myBall.draw();*/

        myBall.loop();
    }
});


</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Ball.html">Ball</a></li><li><a href="Bar.html">Bar</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ctx">ctx</a></li><li><a href="global.html#initialPositionForBallX">initialPositionForBallX</a></li><li><a href="global.html#initialPositionForBallY">initialPositionForBallY</a></li><li><a href="global.html#myBackground">myBackground</a></li><li><a href="global.html#myCanvas">myCanvas</a></li><li><a href="global.html#randomColor">randomColor</a></li><li><a href="global.html#randomNumber">randomNumber</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Dec 31 2021 08:57:47 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
